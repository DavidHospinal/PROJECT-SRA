<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Estratégico</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f3f4f6;
            padding: 0;
            margin: 0;
            color: #333;
        }
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 20px auto;
        }
        .header {
            background-color: #e74c3c;
            color: #fff;
            padding: 15px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }
        .form-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        .form-group label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .button-group {
            text-align: center;
        }
        .button-group button {
            background-color: #e74c3c;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .info-cards {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .card {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 200px;
            text-align: center;
        }
        .card-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }
        .card-value {
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
            margin-top: 10px;
        }
        .chart-container {
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }
        .chart-box {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-width: 300px;
        }
        .chart-title {
            font-size: 18px;
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="header">SALFACORP - DASHBOARD ESTRATÉGICO DE CADENA DE SUMINISTRO</div>
    <div class="container">
      <div>
        <div class="button-group" style="margin-top:22px;margin-left:10px;">
          <button style="background-color:#FFDE03;"><b>KPIS II</b></button>
          <button><b>Table</b></button>
          <button><b>Dialog Box</b></button>
          <button type="button" onclick="kpiUno()"><b>KPIS I</b></button>
          <button><b>VISUAL</b></button>
          <button><b>RATIO</b></button>
        </div>
      </div>
        <!-- Formulario -->
        <div>
        </div>
      <div>
        <div class="form-container">
            <div class="form-group">
                <label for="proyecto">Proyecto</label>
                <select id="proyecto">
                    <option>Proyecto</option>
                    <option>Región</option>
                    <option>Tipo Material</option>
                    <option>Actividad</option>
                    <option>Especialidad</option>
                </select>
            </div>
            <div class="form-group">
                <label for="fecha-inicio">Fecha Inicio</label>
                <input type="date" id="fecha-inicio">
            </div>
            <div class="form-group" style="margin-left:10px;">
                <label for="fecha-fin">Fecha Fin</label>
                <input type="date" id="fecha-fin">
            </div>
            <div class="button-group" style="margin-top:22px;margin-left:10px;">
                <button type="button" onclick="filtrar()">Filtrar</button>
            </div>
        </div>

        <div>
            <p style="font-size:18px;text-align:center;"><b>"Indicadores Clave de Desempeño en Tiempo Real"</b></p>
            <p style="font-size:18px;margin-top:10px;text-align:center;"><b>Actualizado automáticamente según la fecha del sistema:</b></p>
            <p style="font-size:16px;margin-top:10px;text-align:center;"><b> <span  id="fecha-sistema"></span><span id="fecha-sistema-2" style="background:orange;margin-left:5px;padding:2px;border-radius:2px;"></span></b></p>
        </div>

        <!-- Tarjetas de Información -->
        <div class="info-cards">
            <div class="card">
                <div class="card-title">Índice de Satisfacción del Usuario</div>
                <div class="card-value">75%</div>
                <p>*Meta: 90% al final del año fiscal</p>
            </div>
            <div class="card">
                <div class="card-title">Tiempo Promedio de Procesamiento</div>
                <div class="card-value">18 horas</div>
                <p>*Meta: Reducir a 12 horas en 3 meses</p>
            </div>
            <div class="card">
                <div class="card-title">Precisión en la Predicción de Necesidades</div>
                <div class="card-value">80%</div>
                <p>*Meta: Aumentar al 90% en 6 meses</p>
            </div>
            <div class="card">
                <div class="card-title">Proyectos Exitosos por Entrega Oportuna</div>
                <div class="card-value">85%</div>
                <p>*Meta: Aumentar al 95% en el próximo año fiscal</p>
            </div>
        </div>

        <!-- Gráficos -->
        <div class="chart-container" id="chart-container" style="display:none;">
            <!-- Gráfico de Barras -->
            <div class="chart-box" style="height:450px;">
                <div class="chart-title">RENDIMIENTO DE CADENA DE SUMINISTRO ANUAL POR MES (2023-2024) - ANÁLISIS REGIONAL</div>
                <canvas id="barLineChart" style="height:100px;"></canvas>
            </div>
            
            <!-- Gráfico Circular -->
            <div style="width:100%;display:flex;justify-content:center;">
                
                <div style="width:500px !important;" class="chart-box">
                    <div class="chart-title">DISTRIBUCIÓN GLOBAL DE SOLICITUDES POR ESTACIÓN DEL AÑO- SALFACORP 2024</div>
                    <canvas style="width:500px;" id="pieChart"></canvas>
                </div>
            </div>
        </div>
      <div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script>

    function kpiUno(){
        location.href = 'reporte-estrategico-1.html';
    }


        // Gráfico de Barras
const barLineCtx = document.getElementById('barLineChart').getContext('2d');
        const barLineChart = new Chart(barLineCtx, {
            type: 'bar',
            data: {
                labels: ['Enero - Norte Grande', 'Febrero - Norte Chico', 'Marzo - Zona Central', 'Abril - Zona Sur', 'Mayo - Zona Austral', 'Junio - Norte Grande', 'Julio - Norte Chico', 'Agosto - Zona Central', 'Septiembre - Zona Sur', 'Octubre - Zona Austral'],
                datasets: [
                    {
                        label: '2023',
                        data: [8168, 5623, 6627, 6501, 6797, 5973, 6199, 5462, 5194, 7060],
                        backgroundColor: '#3498db',
                        yAxisID: 'y'
                    },
                    {
                        label: '2024',
                        data: [3078, 1952, 2247, 2442, 1771, 2026, 1928, 2546, 1893, 3125],
                        backgroundColor: '#9b59b6',
                        yAxisID: 'y'
                    },
                    {
                        label: 'Tasa de Eficiencia (%)',
                        data: [15, 18, 20, 22, 19, 21, 23, 18, 20, 25],
                        type: 'line',
                        borderColor: '#FACFA9',
                        backgroundColor: '#FACFA9',
                        yAxisID: 'y1'
                    },
                                        {
                        label: 'Tiempo Promedio Proceso',
                        data: [18, 15, 21, 22, 19, 19, 23, 17, 20, 23],
                        type: 'line',
                        borderColor: '#A3D2F6',
                        backgroundColor: '#A3D2F6',
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Cantidad de Solicitudes'
                        },
                        ticks: {
                            color: '#333'
                        }
                    },
                    y1: {
                        beginAtZero: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Tasa de Eficiencia (%)'
                        },
                        ticks: {
                            color: '#333'
                        }
                    },
                    x: {
                        ticks: {
                            color: '#333'
                        }
                    }
                }
            }
        });

        // Gráfico Circular
        const pieCtx = document.getElementById('pieChart').getContext('2d');
        const pieChart = new Chart(pieCtx, {
            type: 'pie',
            labels: ['Otoño', 'Verano', 'Primavera', 'Invierno'],
            data: {
                labels: ['Otoño', 'Verano', 'Primavera', 'Invierno'],
                datasets: [{
                    data: [25, 35, 20, 20],
                    backgroundColor: ['#3498db', '#e74c3c', '#f39c12', '#2ecc71']
                }]
            },
    options: {
        plugins: {
            legend: {
                labels: {
                    color: 'black' // Cambia el color del texto de la leyenda a blanco
                }
            },
            datalabels: {
                color: 'white', // Color del texto
                formatter: (value, context) => {
                    // Calcula el porcentaje
                    const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                    const percentage = ((value / total) * 100).toFixed(1);
                    return parseInt(percentage) + '%'; // Devuelve el porcentaje
                },
                font: {
                    size: 14 // Tamaño del texto
                }
            }
        }
    },
    plugins: [ChartDataLabels]
        });

    function obtenerFechaActual() {
        const diasSemana = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
        const meses = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];

        const fecha = new Date();

        const diaSemana = diasSemana[fecha.getDay()];
        const dia = fecha.getDate().toString().padStart(2, '0');
        const mes = meses[fecha.getMonth()];
        const anio = fecha.getFullYear();

        const horas = fecha.getHours().toString().padStart(2, '0');
        const minutos = fecha.getMinutes().toString().padStart(2, '0');
        const segundos = fecha.getSeconds().toString().padStart(2, '0'); // Añadimos los segundos

        const periodo = horas >= 12 ? 'pm' : 'am';

        document.getElementById('fecha-sistema').innerHTML = `${diaSemana}, ${dia}/${mes}/${anio}`;
        document.getElementById('fecha-sistema-2').innerHTML = `${horas}:${minutos}:${segundos} ${periodo}`;
    }

    obtenerFechaActual()
    setInterval(obtenerFechaActual, 1000);

    function filtrar(){
        document.getElementById('chart-container').style.display = 'flex';

        total = 100;
        valor = Math.floor(Math.random() * 100) + 1;
        x1 = parseInt((100 - valor) / 3);
        x2 = parseInt((100 - valor) / 3);
        x3 = parseInt((100 - valor) / 3);

        xtotal = valor + x1 + x2 + x3;

        if(total !== xtotal) {
            diferencia = total - xtotal;
            x3 = x3 + diferencia;
        }

        pieChart.data.datasets[0].data = [valor, x1, x2, x3];
        barLineChart.data.datasets[0].data = [Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1];
        barLineChart.data.datasets[1].data = [Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1];
        barLineChart.data.datasets[2].data = [Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1];
        barLineChart.data.datasets[3].data = [Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1, Math.floor(Math.random() * 100) + 1];

        pieChart.update();
        barLineChart.update();
    }

    </script>
</body>
</html>
